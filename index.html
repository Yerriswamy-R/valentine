<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Always Us ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíñ</text></svg>">

<style>
    body {
        margin: 0;
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #ff758c, #ff7eb3);
        height: 100vh;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
    }

    .popup {
        background: #fff;
        color: #333;
        padding: 30px;
        border-radius: 20px;
        text-align: center;
        width: 320px;
        position: relative;
        z-index: 2;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    h2 span { color: #ff4d6d; }

    button {
        padding: 12px 25px;
        font-size: 16px;
        border: none;
        border-radius: 30px;
        cursor: pointer;
        margin: 10px;
    }

    #yesBtn { 
        background: #ff4d6d; 
        color: #fff; 
        border: none;
        position: relative;
        margin-right: 60%;
    }
    
    #noBtn { 
        background: #ccc; 
        position: absolute;
        border: none;
    }

    .mobile-only {
        display: none;
        margin-top: 10px;
        font-size: 14px;
        color: #ff4d6d;
    }

    @media (max-width: 768px) { 
        .mobile-only { display: block; } 
        .popup {
            width: 90%;
            margin: 20px;
        }
    }

    /* FIXED: Updated heart styles with rotation */
    .heart {
        position: fixed;
        top: -10px;
        font-size: 20px;
        animation: fall linear forwards;
        z-index: 9999; /* Increased z-index to be on top */
        pointer-events: none;
    }

    /* FIXED: Updated animation to include rotation */
    @keyframes fall { 
        to { 
            transform: translateY(110vh) rotate(360deg); 
            opacity: 0;
        } 
    }
    
    .success-screen {
        display: none;
        text-align: center;
        padding: 40px;
        width: 100%;
        height: 100vh;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        z-index: 10;
        position: relative;
    }
    
    .success-screen h1 {
        font-size: 3em;
        margin-bottom: 20px;
    }
    
    .loading {
        display: none;
        color: #ff4d6d;
        margin-top: 15px;
    }
</style>
</head>

<body>

<!-- Main Popup -->
<div class="popup" id="mainPopup">
    <h2>Hey <span>Meena</span> üíï</h2>
    <p>Be mine ‚ù§Ô∏è?</p>

    <button id="yesBtn">YES üòç</button>
    <button id="noBtn">NO üòâ</button>
    
    <div class="loading" id="loading">Sending love... üíå</div>

    <div class="mobile-only">üì± Best viewed on phone üòâ</div>
</div>

<!-- Success Screen (initially hidden) -->
<div class="success-screen" id="successScreen">
    <h1>Yaaayyy üòç‚ù§Ô∏è</h1>
    <p>You just made my heart smile üíñ</p>
    <p style="margin-top: 20px; font-size: 0.9em; color: rgba(255,255,255,0.8);">
        Your love has reached to Yerri üíå
    </p>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    console.log("üöÄ Page loaded successfully");
    
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const popup = document.getElementById("mainPopup");
    const successScreen = document.getElementById("successScreen");
    const loading = document.getElementById("loading");
    
    // Initialize button positions
    noBtn.style.position = "absolute";
    noBtn.style.left = "50%";
    noBtn.style.transform = "translateX(40%)";
    
    // Make NO button move
    noBtn.addEventListener("mouseenter", function() {
        const maxX = popup.clientWidth - noBtn.offsetWidth - 20;
        const maxY = popup.clientHeight - noBtn.offsetHeight - 20;
        const randomX = Math.random() * maxX;
        const randomY = Math.random() * maxY;
        
        noBtn.style.left = randomX + "px";
        noBtn.style.top = randomY + "px";
        noBtn.style.transform = "none";
    });
    
    // YES button click
    yesBtn.addEventListener("click", function() {
        console.log("üíñ YES button clicked");
        
        // Show loading
        yesBtn.disabled = true;
        yesBtn.innerHTML = "Sending...";
        loading.style.display = "block";
        
        // Try to send email
        try {
            const script = document.createElement('script');
            script.src = "https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js";
            script.onload = function() {
                console.log("üìß EmailJS loaded");
                
                emailjs.init("EJAqOX-uvSbAgw8DU");
                
                emailjs.send("service_a8y6rbg", "template_qzeac8q", {
                    to_name: "Yerri",
                    from_name: "Meena",
                    message: "Meena clicked YES on your proposal! üíñ‚ù§Ô∏èüéâ",
                    date: new Date().toLocaleString()
                })
                .then(function(response) {
                    console.log("‚úÖ Email sent:", response.status);
                })
                .catch(function(error) {
                    console.log("‚ö†Ô∏è Email failed:", error);
                })
                .finally(function() {
                    showSuccess();
                });
            };
            
            script.onerror = function() {
                console.log("‚ö†Ô∏è Couldn't load EmailJS");
                showSuccess();
            };
            
            document.head.appendChild(script);
            
        } catch (error) {
            console.log("‚ö†Ô∏è Error in email sending");
            showSuccess();
        }
    });
    
    function showSuccess() {
        console.log("üéâ Showing success screen");
        
        // Hide popup, show success
        popup.style.display = "none";
        successScreen.style.display = "flex";
        
        // Create falling hearts
        createHearts();
    }
    
    function createHearts() {
        console.log("üíï Creating hearts...");
        
        const loveEmojis = [
            'üíò', 'üíù', 'üíñ', 'üíó', 'üíì', 'üíû', 'üíï', 'üíü', '‚ù£Ô∏è',
            'üíå', 'üíã', 'üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®', 'üë®‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë®', 'üë©‚Äç‚ù§Ô∏è‚Äçüíã‚Äçüë©',
            'üíè', 'üíë', 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', 'üë®‚Äçüë®‚Äçüëß', 'üë©‚Äçüë©‚Äçüë¶'
        ];        
        
        // FIXED: Don't add duplicate animation style - it's already in CSS
        
        // Create hearts
        let heartCount = 0;
        const interval = setInterval(() => {
            if (heartCount >= 30) { // Increased to 30 hearts
                clearInterval(interval);
                return;
            }
            
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = loveEmojis[Math.floor(Math.random() * loveEmojis.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 25 + 25) + 'px'; // Larger font
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            
            // FIXED: Add random rotation direction
            heart.style.animation = `fall linear forwards`;
            
            document.body.appendChild(heart);
            
            console.log(`üíñ Heart ${heartCount + 1} created: ${heart.innerHTML}`);
            
            // Remove after animation
            const duration = parseFloat(heart.style.animationDuration) * 1000;
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.remove();
                }
            }, duration + 100);
            
            heartCount++;
        }, 150); // Faster creation
        
        // Also create some hearts immediately
        for(let i = 0; i < 5; i++) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = loveEmojis[Math.floor(Math.random() * loveEmojis.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.fontSize = (Math.random() * 25 + 25) + 'px';
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            heart.style.animationDelay = (i * 0.1) + 's';
            document.body.appendChild(heart);
            
            const duration = (parseFloat(heart.style.animationDuration) + parseFloat(heart.style.animationDelay)) * 1000;
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.remove();
                }
            }, duration + 100);
        }
    }
    
    // Test: All elements should be available
    console.log("‚úÖ Elements found:", {
        yesBtn: !!yesBtn,
        noBtn: !!noBtn,
        popup: !!popup,
        successScreen: !!successScreen
    });
    
    // TEST BUTTON - Remove this in production
    const testBtn = document.createElement('button');
    testBtn.textContent = 'Test Hearts';
    testBtn.style.cssText = 'position: fixed; top: 10px; left: 10px; z-index: 10000; background: #4CAF50; color: white; padding: 10px; border-radius: 5px;';
    testBtn.onclick = createHearts;
    document.body.appendChild(testBtn);
});
</script>
</body>
</html>
